<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Table Component â€“ Demo</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin></script>
  <style>
    * { box-sizing: border-box; }
    html, body { margin: 0; height: 100%; background: #f4f4f5; }
    #root { height: 100%; padding: 24px; }
    .demo-wrapper {
      width: 100%;
      height: 100%;
      min-height: 400px;
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      position: relative;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel" data-type="module">
    const { useMemo } = React;

    function Component({ config = {} }) {
      const prefersReducedMotion = typeof window !== 'undefined'
        ? window.matchMedia('(prefers-reduced-motion: reduce)').matches
        : false;

      const columnHeadersStr = config?.columnHeaders || 'Name,Email,Role';
      const tableRowsStr = config?.tableRows || '';
      const showHeader = config?.showHeader !== false;
      const emptyMessage = config?.emptyMessage || 'Add column headers and row data to display the table.';
      const stripedRows = config?.stripedRows === true;

      const backgroundColor = config?.backgroundColor || '#FFFFFF';
      const headerBackgroundColor = config?.headerBackgroundColor || '#FAFAFA';
      const headerTextColor = config?.headerTextColor || '#18181B';
      const textColor = config?.textColor || '#3F3F46';
      const borderColor = config?.borderColor || '#E4E4E7';
      const hoverBackgroundColor = config?.hoverBackgroundColor || '#F4F4F5';
      const alternatingRowColor = config?.alternatingRowColor || '#FAFAFA';
      const emptyStateTextColor = config?.emptyStateTextColor || '#71717A';

      const fontSize = parseInt(config?.fontSize || '14', 10);
      const headerFontSize = parseInt(config?.headerFontSize || '14', 10);
      const fontWeight = config?.fontWeight || '400';
      const headerFontWeight = config?.headerFontWeight || '500';
      const cellPadding = parseInt(config?.cellPadding || '12', 10);
      const borderRadius = parseInt(config?.borderRadius || '8', 10);
      const borderWidth = parseInt(config?.borderWidth || '1', 10);

      const headers = useMemo(() => {
        return (columnHeadersStr || '')
          .split(',')
          .map(h => h.trim())
          .filter(Boolean);
      }, [columnHeadersStr]);

      const rows = useMemo(() => {
        if (!tableRowsStr || !tableRowsStr.trim()) return [];
        return tableRowsStr
          .split('\n')
          .map(line => line.split(',').map(c => c.trim()))
          .filter(cells => cells.some(c => c.length > 0));
      }, [tableRowsStr]);

      const hasData = headers.length > 0 && rows.length > 0;
      const transitionMs = prefersReducedMotion ? 0 : 200;

      if (!hasData) {
        return (
          <div
            className="data-table"
            style={{
              position: 'absolute',
              top: 0,
              left: 0,
              width: '100%',
              height: '100%',
              backgroundColor,
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              padding: '40px',
              borderRadius: borderRadius + 'px',
              border: borderWidth > 0 ? `${borderWidth}px solid ${borderColor}` : 'none',
              boxSizing: 'border-box'
            }}
          >
            <p style={{ margin: 0, fontSize: '16px', color: emptyStateTextColor, textAlign: 'center', maxWidth: '360px' }}>
              {emptyMessage}
            </p>
          </div>
        );
      }

      const borderStyle = borderWidth > 0 ? `${borderWidth}px solid ${borderColor}` : 'none';

      return (
        <div
          className="data-table"
          style={{
            position: 'absolute',
            top: 0,
            left: 0,
            width: '100%',
            height: '100%',
            overflow: 'auto',
            backgroundColor,
            borderRadius: borderRadius + 'px',
            border: borderStyle,
            boxShadow: '0 1px 3px rgba(0,0,0,0.06)',
            boxSizing: 'border-box'
          }}
        >
          <table role="grid" aria-readonly="true" style={{ width: '100%', borderCollapse: 'collapse', borderSpacing: 0, tableLayout: 'auto' }}>
            {showHeader && headers.length > 0 && (
              <thead>
                <tr>
                  {headers.map((header, index) => (
                    <th
                      key={index}
                      scope="col"
                      style={{
                        padding: cellPadding + 'px',
                        textAlign: 'left',
                        fontSize: headerFontSize + 'px',
                        fontWeight: headerFontWeight,
                        color: headerTextColor,
                        backgroundColor: headerBackgroundColor,
                        borderBottom: borderStyle,
                        borderRight: index < headers.length - 1 ? borderStyle : 'none'
                      }}
                    >
                      {header}
                    </th>
                  ))}
                </tr>
              </thead>
            )}
            <tbody>
              {rows.map((cells, rowIndex) => {
                const isEven = rowIndex % 2 === 0;
                const rowBg = stripedRows ? (isEven ? backgroundColor : alternatingRowColor) : backgroundColor;
                return (
                  <tr
                    key={rowIndex}
                    style={{
                      backgroundColor: rowBg,
                      transition: prefersReducedMotion ? 'none' : `background-color ${transitionMs}ms ease-out`
                    }}
                    onMouseEnter={(e) => {
                      if (prefersReducedMotion) return;
                      e.currentTarget.style.backgroundColor = hoverBackgroundColor;
                    }}
                    onMouseLeave={(e) => {
                      e.currentTarget.style.backgroundColor = rowBg;
                    }}
                  >
                    {headers.map((_, cellIndex) => (
                      <td
                        key={cellIndex}
                        style={{
                          padding: cellPadding + 'px',
                          fontSize: fontSize + 'px',
                          fontWeight,
                          color: textColor,
                          borderBottom: borderStyle,
                          borderRight: cellIndex < headers.length - 1 ? borderStyle : 'none'
                        }}
                      >
                        {cells[cellIndex] ?? ''}
                      </td>
                    ))}
                  </tr>
                );
              })}
            </tbody>
          </table>
        </div>
      );
    }

    const defaultConfig = {
      columnHeaders: 'Name,Email,Role',
      tableRows: 'John Doe,john@example.com,Admin\nJane Smith,jane@example.com,Editor\nAlex Brown,alex@example.com,Viewer',
      showHeader: true,
      stripedRows: true
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(
      <div className="demo-wrapper">
        <Component config={defaultConfig} />
      </div>
    );
  </script>
</body>
</html>
